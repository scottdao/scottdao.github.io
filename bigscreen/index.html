<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"> 
<title>index</title>
<script type="text/javascript" src="js/jquery.js"></script>
<link rel="stylesheet" href="css/comon0.css">
</head>
	<script>
	$(window).load(function(){  
             $(".loading").fadeOut()
  })
$(document).ready(function(){
	var whei=$(window).width()
	$("html").css({fontSize:whei/20})
	$(window).resize(function(){
		var whei=$(window).width()
	 $("html").css({fontSize:whei/20})
});
	});
	</script>
  <script type="text/javascript" src="js/echarts.min.js"></script> 
	<script language="JavaScript" src="js/js.js"></script>
  <body>
<div class="canvas" style="opacity: .2">
	<iframe frameborder="0" src="js/index.html" style="width: 100%; height: 100%"></iframe>
	</div>
<div class="loading">
  <div class="loadbox"> <img src="picture/loading.gif"> 页面加载中... </div>
</div>
<div class="head">
  <!-- <h1>大数据可视化展板通用模板</h1> -->
  <h1>互联网价格监测分析大数据系统</h1>
  <div class="weather"><!--<img src="picture/weather.png"><span>多云转小雨</span>--><span id="showTime"></span></div>
	
	<script>
var t = null;
    t = setTimeout(time,1000);//開始运行
    function time()
    {
       clearTimeout(t);//清除定时器
       dt = new Date();
		var y=dt.getFullYear();
		var mt=dt.getMonth()+1;
		var day=dt.getDate();
       var h=dt.getHours();//获取时
       var m=dt.getMinutes();//获取分
       var s=dt.getSeconds();//获取秒
       document.getElementById("showTime").innerHTML = y+"年"+mt+"月"+day+"-"+h+"时"+m+"分"+s+"秒";
       t = setTimeout(time,1000); //设定定时器，循环运行     
    } 

</script>
	
	
</div>
<div class="mainbox">
  <ul class="clearfix">
    <li>
      <div class="boxall box-left-class" >
        <div class="alltitle">
          <span class="title-text platTitle">
            <!-- 监测平台总数 -->
          </span>
          <span class="font-color title-num platNum">137</span>
        </div>
        <!-- <div class="allnav" id="echart1"></div> -->
        <div class="platNums" id="platNums">
          <ul class="plat-icon-list platIconsList clear-scrollbar">
          </ul>
          <div class='plat-charts all-nav-echarts' id='classFiled'></div> 
        </div>
        <div class="boxfoot"></div>
      </div>
      <div class="boxall box-all-left-second">
        <div class="alltitle">
          <span class="title-text checkServerTitle">
              <!-- 重点监测商品/服务总数 -->
          </span>
          <span class="font-color title-num server-num">137</span>
          <span class="font-color title-num-small server-addNums" >昨日+72</span>
        </div>
        <!-- <div class="allnav" id="echart2"></div> -->
        <div class="ul-over-auto ul-server-height clear-scrollbar">
          <!-- <ul class="ul-li-nolegal check-ul">
          </ul> -->
          <ul class="no-rule-ul   check-ul ul-over-auto clear-scrollbar">
          </ul>
        </div>
        <div class="boxfoot"></div>
      </div>
      <div class="boxall box-all-left-last">
        <div class="alltitle">
            <span class="title-text">
              已巡检商品或服务次数
            </span>
            <span class="font-color title-num totalNum">137151256</span>
        </div>
        <div class="all-nav-echarts-small" id="echart1"></div>
        <div class="boxfoot"></div>
      </div>
    </li>
    <li style="position: relative;">
      <div class="bar">
        <div class="barbox">
          <ul class="clearfix">
            <li class="pulll_left counter">356672</li>
            <li class="pulll_left counter">137</li>
          </ul>
        </div>
        <div class="barbox2">
          <ul class="clearfix">
            <li class="pulll_left">
              <!-- 2018年总收入情况 -->
              <!-- 总数据条数 -->
              <div>已巡检商品或服务次数</div>
              <div class='btn-switch' id='pro-btn'> 四川省：21市州</div>
             </li>
            <li class="pulll_left">
              <!-- 2018年总支出情况 -->
              已探测疑似违法线索
            </li>
          </ul>
        </div>
      </div>
      <div class="map">
        <div class="map1"><img src="picture/lbx.png"></div>
        <div class="map2"><img src="picture/jt.png"></div>
        <div class="map3"><img src="picture/map.png"></div>
        <!-- <div class="map4" id="map_1"></div> -->
        <div class="map4" id="container"></div>
        <div class="maploading" style="display: none;">
          <div class="loadbox"> <img src="picture/loading.gif"> 地图加载中... </div>
        </div>
      </div>
      <div class="boxall" style="height: 2.8rem;bottom:-0.4rem;position: absolute;width: 100%;margin-bottom: 0;">
        <div class="alltitle">
            <span class="title-text">
              <!-- 过去7天 四川消费者热门应用 -->
              近7日每日大概6000-8000左右随机
            </span>
        </div>
        <div class="allnav" id="echartHotShops"></div>
        <div class="boxfoot"></div>
      </div>
    </li>
    <li>
      <div class="boxall boxall-bottom" >
          <div class="alltitle">
            <span class="title-text ">
                疑似价格违法线索
            </span>
            <span class="font-color title-num">137</span>
            <span class="font-color title-num-small" >昨日+1</span>
          </div>
          <!-- <div class="allnav" id="echart4"></div> -->
          <div class="all-nav-echarts" id="echart5"></div>
          <div class="boxfoot"></div>
      </div>
      <div class="boxall boxall-bottom" >
          <div class="alltitle">
            <span class="title-text leageTitle">
              疑似价格违法平台
            </span>
            <span class="font-color-red title-num legalTotal">
              <!-- 12 -->
            </span>
            <span class="font-color-red title-num-small legalTimer" >
              <!-- （过去6月） -->
            </span>
          </div>
          <!-- <div class="allnav" id="echart5"></div> -->
          <div class=" over-flow-scroll">
            <ul class="plat-no-rule noRuleIcon" style="flex-wrap: nowrap;">
            </ul>
            <ul class="no-rule-ul  noRuleTitle">
            </ul>
          </div>
          <div class="boxfoot"></div>
      </div>
      <div class="boxall boxall-bottom">
        <div class="alltitle">
          <span class="title-text noLegalTitle">
            <!-- 暂未发现价格违法平台 -->
          </span>
          <span class="font-color-red title-num noLegalTotal">12</span>
          <span class="font-color-red title-num-small noLegalTimer" >（过去1月）</span>
        </div>
        <!-- <ul class="ul-li-nolegal nolegal-height  noLegalList ul-over-auto clear-scrollbar">
        </ul> -->
        <ul class="no-rule-ul nolegal-height  noLegalList ul-over-auto clear-scrollbar">
        </ul>
        <div class="boxfoot"></div>
      </div>
    </li>
  </ul>
</div>
<div class="back"></div>
<script type="text/javascript">
  window._AMapSecurityConfig = {
          securityJsCode:'b389b56d89a7bf7613b0c9b0f6bf2305',
  }
</script>
<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=97994bbe96072295fac18fec70ee3bc1&plugin=AMap.DistrictSearch&plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar"></script>
<script>
  const  map = new AMap.Map('container', {
    resizeEnable: true,
      center: [116.418261, 39.921984],
      zoom:12,
      viewMode:'3D',
      // resizeEnable: true,
      mapStyle:"amap://styles/darkblue"
  });
    var district = null;
    var polygons=[];
    function drawBounds(value) {
      return new Promise((resolve)=>{
           //加载行政区划插件
        if(!district){
            //实例化DistrictSearch
            var opts = {
                subdistrict: 0,   //获取边界不需要返回下级行政区
                extensions: 'all',  //返回行政区边界坐标组等具体信息
                level: 'district'  //查询行政级别为 市
            };
            district = new AMap.DistrictSearch(opts);
        }
        //行政区查询
        district.setLevel('province')
        district.search(value, function(status, result) {
            map.remove(polygons)//清除上次结果
            polygons = [];
            var bounds = result.districtList[0].boundaries;
            if (bounds) {
                for (var i = 0, l = bounds.length; i < l; i++) {
                    //生成行政区划polygon
                    var polygon = new AMap.Polygon({
                        strokeWeight: 1,
                        path: bounds[i],
                        fillOpacity: 0.4,
                        fillColor: '#80d8ff',
                        strokeColor: '#0091ea'
                    });
                    polygons.push(polygon);
                }
            }
            map.add(polygons)
            map.setFitView(polygons);//视口自适应
            resolve()
        });
      })
    }
    drawBounds('四川');
    let flag = false
    // 切换地区
    $('#pro-btn').click(function(){
        // console.log($(this))
    // flag = false
    $('.maploading').css({display:'block'})
    if(flag){
       
        drawBounds('四川').then(res=>{
          $('.maploading').css({display:'none'})
          flag = false
          $(this).html('四川省：21市州')
        })
       
    }else{
       
        drawBounds('中国').then(res=>{
          $('.maploading').css({display:'none'})
          flag = true
          $(this).html('全国')
        });
       
    }
})
</script>
<script type="text/javascript" src="js/china.js"></script> 
<script type="text/javascript" src="js/area_echarts.js"></script> 
<script src="./common/icon-font.js"></script>
</body>
</html>
